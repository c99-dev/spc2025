<nav
  class="navbar navbar-expand-lg navbar-dark <%= user && user.is_admin ? 'bg-danger' : 'bg-primary' %> shadow-sm sticky-top"
>
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="/">
      <i class="bi bi-music-note-beamed me-2"></i>
      <span class="fw-bold">Music App</span>
      <% if (user && user.is_admin) { %>
      <span class="badge bg-light text-danger ms-2">관리자</span>
      <% } %>
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link <%= path === '/' ? 'active' : '' %>" href="/">
            <i class="bi bi-house-door me-1"></i> 홈
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link <%= path && path.startsWith('/toplikes') ? 'active' : '' %>"
            href="/toplikes"
          >
            <i class="bi bi-heart me-1"></i> 인기 음악
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link <%= path && path.startsWith('/hashtags') ? 'active' : '' %>"
            href="/hashtags"
          >
            <i class="bi bi-hash me-1"></i> 해시태그
          </a>
        </li>
        <% if (user && user.is_admin) { %>
        <li class="nav-item">
          <a
            class="nav-link <%= path && path.startsWith('/admin/users') ? 'active' : '' %>"
            href="/admin/users"
          >
            <i class="bi bi-people me-1"></i> 회원관리
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link <%= path && path.startsWith('/admin/comments') ? 'active' : '' %>"
            href="/admin/comments"
          >
            <i class="bi bi-chat-dots me-1"></i> 댓글관리
          </a>
        </li>
        <% } %> <% if (user) { %>
        <li class="nav-item">
          <a
            class="nav-link <%= path && path.startsWith('/notifications') ? 'active' : '' %> position-relative"
            href="/notifications"
          >
            <i class="bi bi-bell me-1"></i> 알림 <% if
            (locals.unreadNotificationCount && unreadNotificationCount > 0) { %>
            <span
              id="notification-badge"
              class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
            >
              <%= unreadNotificationCount %>
              <span class="visually-hidden">개의 읽지 않은 알림</span>
            </span>
            <% } %>
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link <%= path && path.startsWith('/profile') ? 'active' : '' %>"
            href="/profile"
          >
            <i class="bi bi-person-circle me-1"></i> 프로필
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/auth/logout">
            <i class="bi bi-box-arrow-right me-1"></i> 로그아웃
          </a>
        </li>
        <% } else { %>
        <li class="nav-item">
          <a
            class="nav-link <%= path && path.startsWith('/auth/login') ? 'active' : '' %>"
            href="/auth/login"
          >
            <i class="bi bi-box-arrow-in-right me-1"></i> 로그인
          </a>
        </li>
        <% } %>
      </ul>
    </div>
  </div>
</nav>

<% if (locals.success && success.length > 0) { %>
<div class="container mt-3">
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    <%= success %>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
</div>
<% } %> <% if (locals.error && error.length > 0) { %>
<div class="container mt-3">
  <div class="alert alert-danger alert-dismissible fade show" role="alert">
    <%= error %>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
</div>
<% } %>
